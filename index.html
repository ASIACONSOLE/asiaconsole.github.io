<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Asia Console</title>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#050712;color:white;}
.nav{display:flex;justify-content:space-between;align-items:center;padding:15px 40px;background:#0b1025;position:sticky;top:0;gap:14px;flex-wrap:wrap}
.nav a{color:white;text-decoration:none;margin:0 10px;white-space:nowrap}
.nav .links{display:flex;align-items:center;flex-wrap:wrap}
button{padding:8px 14px;border-radius:8px;border:0;cursor:pointer;background:#111a3a;color:white}
.hero{text-align:center;padding:80px 20px}
.card{max-width:900px;margin:18px auto 70px;padding:22px;background:#0b1025;border-radius:18px}
.muted{color:#cfd3ff;line-height:1.7}

/* Modal */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center;padding:18px}
.modal-box{background:#0b1025;padding:18px;border-radius:16px;width:min(360px,100%);border:1px solid #1b275a}
input{width:100%;margin:7px 0;padding:10px 12px;border-radius:10px;border:1px solid #222;background:#050712;color:white}
.close{float:right;cursor:pointer;color:#cfd3ff;background:transparent;border:0;font-size:18px}
.user{font-size:12px;color:#cfd3ff}
.row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.row button{flex:1}
.small{font-size:12px;color:#cfd3ff;opacity:.9;margin-top:10px;line-height:1.4}
</style>
</head>

<body>

<nav class="nav">
  <a href="./">Asia Console</a>

  <div class="links">
    <a href="./">Ana Sayfa</a>
    <a href="services.html">Servisler</a>
    <a href="showcase.html">Vitrin</a>
    <a href="stack.html">Teknoloji</a>
    <a href="games.html">Games</a>
    <a href="apps.html">Apps</a>
    <a href="forum.html">Forum</a>
    <a href="contact.html">ƒ∞leti≈üim</a>
    <a href="members.html">√úye Paneli</a>
  </div>

  <div style="display:flex;align-items:center;gap:10px">
    <span id="userLabel" class="user"></span>
    <button id="authBtn">Giri≈ü / √úye Ol</button>
    <button id="logoutBtn" style="display:none">√áƒ±kƒ±≈ü</button>
  </div>
</nav>

<div class="hero">
  <h1>Asia Console Studio</h1>
  <p>Game & App Development</p>
</div>

<div class="card">
  <h2>Ho≈ü geldin üëã</h2>
  <p class="muted">
    Firebase Authentication aktif. √úye ol / giri≈ü yap.
    Hata olursa ekranda ger√ßek hata kodu g√∂sterilir.
  </p>
</div>

<!-- LOGIN MODAL -->
<div id="authModal" class="modal">
  <div class="modal-box">
    <button class="close" id="closeAuth" aria-label="Kapat">‚úï</button>
    <h3 style="margin:0 0 10px">Giri≈ü / √úye Ol</h3>

    <input id="email" type="email" placeholder="E-posta">
    <input id="pass" type="password" placeholder="≈ûifre (min 6 karakter)">

    <div class="row">
      <button id="loginBtn">Giri≈ü Yap</button>
      <button id="registerBtn">√úye Ol</button>
    </div>

    <div class="row">
      <button id="googleBtn">Google ile</button>
    </div>

    <div class="small">
      ‚Ä¢ Email/≈ûifre i√ßin ≈üifre en az 6 karakter olmalƒ±.<br>
      ‚Ä¢ Google giri≈ü hata verirse genelde Firebase ‚Üí Authorized domains eksiktir.
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import {
  getAuth,
  onAuthStateChanged,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  signOut,
  GoogleAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAY2-JMHxNgBvM8jHmadiCRHi--eDTSW_Q",
  authDomain: "asia-console.firebaseapp.com",
  projectId: "asia-console",
  storageBucket: "asia-console.firebasestorage.app",
  messagingSenderId: "1063457883595",
  appId: "1:1063457883595:web:c8b5946208098f19a9e24e",
  measurementId: "G-50B31ZJV6C"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// UI refs
const modal = document.getElementById("authModal");
const authBtn = document.getElementById("authBtn");
const logoutBtn = document.getElementById("logoutBtn");
const userLabel = document.getElementById("userLabel");
const emailEl = document.getElementById("email");
const passEl  = document.getElementById("pass");

function openModal(){ modal.style.display = "flex"; }
function closeModal(){ modal.style.display = "none"; }

authBtn.addEventListener("click", openModal);
document.getElementById("closeAuth").addEventListener("click", closeModal);
modal.addEventListener("click", (e)=>{ if(e.target === modal) closeModal(); });

function showAuthError(prefix, e){
  const code = e?.code || "";
  const msg = e?.message || e;
  alert(prefix + ":\n" + code + "\n" + msg);
  console.error(e);
}

document.getElementById("loginBtn").addEventListener("click", async () => {
  const email = (emailEl.value || "").trim();
  const pass  = (passEl.value || "");
  if (!email.includes("@")) { alert("Ge√ßerli bir e-posta yaz."); return; }
  if (!pass) { alert("≈ûifre gir."); return; }

  try {
    await signInWithEmailAndPassword(auth, email, pass);
    closeModal();
  } catch(e){
    showAuthError("Giri≈ü hatasƒ±", e);
  }
});

document.getElementById("registerBtn").addEventListener("click", async () => {
  const email = (emailEl.value || "").trim();
  const pass  = (passEl.value || "");
  if (!email.includes("@")) { alert("Ge√ßerli bir e-posta yaz."); return; }
  if (pass.length < 6) { alert("≈ûifre en az 6 karakter olmalƒ±."); return; }

  try {
    await createUserWithEmailAndPassword(auth, email, pass);
    closeModal();
  } catch(e){
    showAuthError("Kayƒ±t hatasƒ±", e);
  }
});

document.getElementById("googleBtn").addEventListener("click", async () => {
  try {
    await signInWithPopup(auth, provider);
    closeModal();
  } catch(e){
    showAuthError("Google giri≈ü hatasƒ±", e);
  }
});

logoutBtn.addEventListener("click", async () => {
  try {
    await signOut(auth);
  } catch(e){
    showAuthError("√áƒ±kƒ±≈ü hatasƒ±", e);
  }
});

onAuthStateChanged(auth, (user) => {
  logoutBtn.style.display = user ? "inline-block" : "none";
  authBtn.style.display = user ? "none" : "inline-block";
  userLabel.textContent = user ? (user.email || user.displayName || "") : "";
});
</script>

</body>
</html>
